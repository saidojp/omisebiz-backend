# Roadmap: Backend Development

Этот план составлен на основе `manifest.md` и фокусируется на разработке серверной части приложения.

## Фаза 1: Инициализация и Инфраструктура
**Цель:** Подготовить фундамент для разработки.

- [ ] **Инициализация проекта**
  - [ ] Настроить Node.js и Express.js
  - [ ] Настроить TypeScript (опционально, но рекомендуется для строгости)
  - [ ] Настроить ESLint и Prettier
- [ ] **База данных**
  - [ ] Поднять PostgreSQL (локально или Docker)
  - [ ] Инициализировать Prisma ORM
  - [ ] Настроить подключение к БД
- [ ] **Конфигурация**
  - [ ] Настроить переменные окружения (`.env`)
  - [ ] Настроить логгер (например, winston или pino)
  - [ ] Настроить CORS и Helmet для базовой безопасности

## Фаза 2: Аутентификация и Пользователи (MVP)
**Цель:** Реализовать управление доступом.

- [ ] **Модели данных (Prisma)**
  - [ ] Создать модель `User`
- [ ] **API Аутентификации**
  - [ ] Регистрация (`POST /api/auth/register`)
  - [ ] Логин (`POST /api/auth/login`)
  - [ ] Logout (если используются куки)
  - [ ] Обновление токена (`POST /api/auth/refresh`)
  - [ ] Middleware для проверки JWT
- [ ] **Безопасность**
  - [ ] Хеширование паролей (bcrypt)
  - [ ] Валидация входных данных (Zod/Joi)

## Фаза 3: Управление Ресторанами (Core MVP)
**Цель:** Реализовать CRUD для ресторанов со всеми полями Google Business Profile.

- [ ] **Модели данных (Prisma)**
  - [ ] Создать модель `Restaurant` (со всеми полями: контакты, часы работы, атрибуты и т.д.)
  - [ ] Настроить связи `User` -> `Restaurant`
- [ ] **API Ресторанов**
  - [ ] Создание ресторана (`POST /api/restaurants`)
  - [ ] Получение списка ресторанов пользователя (`GET /api/restaurants`)
  - [ ] Получение деталей ресторана (`GET /api/restaurants/:id`)
  - [ ] Обновление ресторана (`PATCH /api/restaurants/:id`)
  - [ ] Удаление ресторана (`DELETE /api/restaurants/:id`)
  - [ ] Публикация/Снятие с публикации
- [ ] **Валидация**
  - [ ] Строгая валидация JSON полей (часы работы, атрибуты)

## Фаза 4: Работа с Медиа
**Цель:** Загрузка и хранение изображений.

- [ ] **Инфраструктура**
  - [ ] Выбрать провайдер (S3, Cloudinary или локально для dev)
  - [ ] Настроить Multer (или аналог) для обработки загрузок
- [ ] **API Загрузки**
  - [ ] Загрузка одного изображения (`POST /api/upload/image`)
  - [ ] Массовая загрузка (`POST /api/upload/images`)
  - [ ] Удаление изображения
- [ ] **Обработка**
  - [ ] Валидация типов файлов (только изображения)
  - [ ] Ограничение размера

## Фаза 5: Публичный API
**Цель:** Отдача данных для публичных страниц ресторанов.

- [ ] **API**
  - [ ] Получение ресторана по slug (`GET /api/public/restaurants/:slug`)
- [ ] **Оптимизация**
  - [ ] Выборка только публичных полей
  - [ ] Оптимизация запросов к БД

## Фаза 6: Подготовка к Деплою
**Цель:** Вывод в продакшн.

- [ ] **Окружение**
  - [ ] Настройка переменных для Production
- [ ] **База данных**
  - [ ] Миграции для Production БД
- [ ] **Тестирование**
  - [ ] Ручное тестирование всех эндпоинтов
  - [ ] (Опционально) Написание тестов (Jest/Supertest)

---
**Следующие шаги:**
1. Начать с Фазы 1: Инициализация проекта.
2. Создать репозиторий и первый коммит.
